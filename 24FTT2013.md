# Logbook
## *By: Edison Phoon Tek Wei*

### Session 05/09/2025

## 1. Check requirements

To recreate this project, we need to have the following installed:
- Laravel Breeze (for authentication template)
- DBNgin (to create MySQL server)
- PHP v8.4 or higher
- npm and node.js
- TablePlus
- Composer

To see full installation, see Appendix A.

To check for version of each, run these commands:
```
bash

php -v
composer -V
node -v
```

## 2. Create Laravel project.

Run this command to order the Laravel to install itself and navigate to the folder:
```
bash

composer create-project laravel/laravel Asg2_NEP_Edison_DCNG03
cd Asg2_NEP_Edison_DCNG03
```

## 3. Git Repository

We want Git for its version control so initialise it on project folder with these commands:
```
bash

git init
git add .
git commit -m "Initial commit"
git branch -M main
```

## 4. Database

We will be using TablePlus to view the sacred MYSQL database. Because of that, we require DBNingin to create a server for TablePlus to connect to. The tricky problem is usually our `.env` file which requires the `DB_` (database) flags to have correct configurations lest the Omnissiah be displeased and our connection to the database fails.

In our `.env` file, we need to set up to this configuration:
```
plaintext

DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=a2p
DB_USERNAME=test
DB_PASSWORD=admin@12345
```

Here since we have set up our MySQL server as `AP2`, we must correspond it in our `.env` file. Then we must do the same thing to our TablePlus by *creating new connection* with MySQL and following the configuration from above.

If unable connect with shown config, even after replacing `127.0.0.1` with "localhost", see Appendix A.

## 5. Migration

Migration as a way *blessed by the Omnissiah* to enable the creation and modification of our database by code instead of manually.

`php artisan make:migration create_games_table --create=games` 

This command will create a migration file containing a table named "games".

A best practice is to name migration files as `create_<name>_table` I.E. `create_books_table`.

And the reason why `--create=games` refers the flag 'games' as a plural is because of assumption that a table will contain multiple entries (hence plural) and a model being a single entry - another *Best Practices* of Laravel.


Now we open this migration file and edit as such following. Where the *schema* is the 'blueprint' of our table and dictates its very properties and where the `up()` function enables us to create or modify the table.
```
php

public function up(): void
{
    Schema::create('games', function (Blueprint $table) {
        $table->id();
        $table->string('name');
        $table->string('genre');
        $table->integer('rating');
        $table->timestamps();
    });
}
```
To apply migration, we run `php artisan migrate` and if successful in our endeavour to TablePlus, we will see the `games` table in our database.


## 6. Seeding

A seeding is the actual thing that will insert data into our table. We create a seder file with this command:
```
bash

php artisan make:seeder GamesTableSeeder
```

We need to tell the `run()` function to insert data into `games` table which is done by the following code:
```
php

public function run(): void
{
    DB::table('games')->insert([
        [
        'name' => 'Minecraft', 
        'genre' => 'Sandbox', 
        'rating' => 7, 
        'created_at' => now(), 
        'updated_at' => now()
        ]
    ]);
}
```
Since we are using `DB::table('games')->insert()` method instead of the Eloquent model via `php artisan make:model Game`, we cannot automate the generation of the `created_at` and `updated_at` fields, hence we need to manually set it with `now()` function.

Take note that we need to import `DB` facade by adding this to the top of our code:
```
php

use Illuminate\Support\Facades\DB;
```

Now we tell this *Machine Spirit* to run this seeder with `php artisan db:seed --class=GamesTableSeeder` command. Be noted that the `--class=` flag is optional; it's just there to specify which seeder to run.


## 7. Model

A model is in simplest terms, a data record in our table. It is not to be confused with a Seeding. Reason why we use a model is to usually specify `fillable` to avoid something called *Mass Assignment Exception* error. 

We create a model with this command: 
```
bash

php artisan make:model Game
```

Now, a mass assignment is, in simplest terms, a way to fill multiple data columns **at all once** instead of doing it manually. A mass assignment error occurs in due to lack of `fillable` property, not the *Machine Spirit's* fault, that Laravel doesn't know which columns are safe to be filled and which are not. In our Game model, we add this line:
```
php

protected $fillable = ['name', 'genre', 'rating'];
```


To apply model, we can use `php artisan tinker command with the following to insert a record;
```
bash

Game::create(['name' => 'Hitman: Blood Money', 'genre' => 'Stealth', 'rating' => 6]);
```


To apply we use `php artisan serve` command.


## 9. Controller

A controller is a medium that connects route to model. Without it, we cannot access model via route. To create a controller, we use this command:
```
bash

php artisan make:controller GameController
```

Inside its `index()` function, we add this to read all data from `games` table:
```
php

public function index() {
    $games = Game::all();

    return response()->json($games);
}
```

On top of the code, we need to import the model by this line:
```
php

use App\Models\Game;
```

### 10. Route

If we use an analogy; A route is like a road that tells traffic (our HTTP request) where to go. A controller is the traffic police that decides what to do with the incoming requests. A model is the end destination that the traffic is heading to.

Go to `routes/web.php` and add this line:
```
php

Route::get('/games', [GameController::class, 'index']);
```

## 11. Asset, Template & View

I asked ChatGPT to generate a dashboard template for me with TailwindCSS.


## Appendix A 

Installation of *Breeze*

1) If you have a pre-existing Laravel project, run `composer require laravel/breeze --dev` command which installs the Breeze package.

2) Run `php artisan breeze:install` command to publish resources to your project folder. 

3) Run `php artisan migrate` to apply migration.

Installation of *npm*

1) Type `npm install` command which installs the npm package. 

2) Run `npm run dev` to compile all assets.


## Appendix B

(A) [SUPERCEDED] Error -> `Driver error 20002: Can't connect to MySQL server on '127.0.0.1'`

Solution [SUPERCEDED] -> Let the Omnimessiah guide your way to `C:\Windows\System32\drivers\etc\hosts` and make changes as following below. After that, restart by re-attempting to connect in TablePlus.
```
plaintext

127.0.0.1       localhost
::1             localhost
```

(B) [SUPERCEDED] Error -> You still cannot connect to the database.

Solution [SUPERCEDED] -> Open up your own development MySQL Server to circumvent the issue. Here's the rough list of configurations and steps:
```
plaintext

Choose Setup Type => Custom
MYSQL Server => Will be installed on local hard drive
Client Programs => Will be installed on local hard drive
Development Components => (No need to enable since you are using TablePlus)
Server Configuration Type => Development Computer
Port = 3306
X Protocol Port = 33060
Enable TCP/IP Networking => (You must enable this)
User account & Password => (You create your own here, just remember to update the .env file accordingly)
```
And here's the `.env` file configuration:
```
plaintext

DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=a2p
DB_USERNAME=test
DB_PASSWORD=admin@12345678
```

(C) [SUPERCEDED] Error -> ERROR 2003 (HY000): Can't connect to MySQL server on localhost (10061)

Solution [SUPERCEDED] -> Make sure that MySQL server is running with the command `netstat -ano | findstr :3306`. If nothing shows up, start the server with `net start MySQL80` with Powershell as administrator. If this still does not work, then pray to the Machine God that the solution to Error (B) works if you haven't tried yet.

**(D) Error [NEWEST]** -> You cannot connect to the database with TablePlus

Solution [NEWEST] -> 

1) Uninstall mySQL server on your desktop to avoid port conflicts.

2) Close all DBngin servers then create a new server with simply putting a name and leaving everything else as default. 

3) Install `npm` and `breeze` with the following commands:
```
bash

npm install
composer require laravel/breeze --dev
```

3) Create a new server on DBNgin. Then, go to TablePlus and create a new connection with the following configuration:
```
plaintext

Name = AP2
Host/IP = 127.0.0.1
Port = 3306
User = root
Password = 
Database = 
```
**Note:** You MUST use `root` as the username and leave the password blank as that's DBNgin's default config. Do not have spaces in the `name` field to avoid future problems. Make sure to have the `.env` file reflect this change.

After saving and testing the connection, head to **Show Database List** via "Ctrl + K" and create a new database named `a2p` and open it. Your **table** dropdown tab should contain a list of database tables including the `games` table. If you don't see it, try refreshing the database and MAKE SURE you apply migration with `php artisan migrate` command.

## Terms

Deprecated = This solution is still functional but is no longer recommended due to there exists better alternatives.

Superceded = This solution is no longer relevant and useful due to discovery of newer solutions, as decreed by *the Omnissiah*.

Newest = This solution is the most recent and up-to-date, meant to replace a solution marked as "Superceded". Otherwise, treat this is any other error & solution.

## Footnotes

[^1]: Might as well be computer-magick if you see this error. This nightmare took me 2 days to solve WITHOUT colleague assistance EVEN with ChatGPT's help - during semester break - of me constantly skipping breakfast & lunch, having severe dehydration symptoms, family activity avoidance, moderate eye strains, sleep deprivation and probably lost around few KGs as a very lean man myself. I included this as a humorous side - NOT an actual step.